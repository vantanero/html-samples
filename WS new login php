<?php
// Hardcoded correct credentials for testing
$correct_username = "admin";
$correct_password = "1234";

// Check if form is submitted
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    // Retrieve and sanitize form data
    $username = htmlspecialchars($_POST['username']);
    $password = htmlspecialchars($_POST['password']);

    // Check if credentials match
    if ($username === $correct_username && $password === $correct_password) {
        // Successful login - HTTP 200
        http_response_code(200);
        header("Location: success.html");
        exit();
    } else {
        // Failed login - HTTP 401, show message with delayed redirect
        http_response_code(401);
        echo '<!DOCTYPE html>
              <html lang="en">
              <head>
                  <meta charset="UTF-8">
                  <meta http-equiv="refresh" content="3;url=index.html?error=unauthorized">
                  <title>Login Failed</title>
              </head>
              <body>
                  <h2>Login Failed</h2>
                  <p style="color: red;">Invalid username or password. Redirecting to login page in 3 seconds...</p>
              </body>
              </html>';
        exit();
    }
} else {
    // Direct access, redirect to login form with HTTP 200
    http_response_code(200);
    header("Location: index.html");
    exit();
}
?>

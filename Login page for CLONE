<?php
// Start the session
session_start();

// Enable error reporting
error_reporting(E_ALL);
ini_set('display_errors', 1);

echo "Debug: login.php is running.<br>"; // To check if the script executes

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    echo "Received POST data: ";
    print_r($_POST); // Print POST data for debugging

    // Sanitize and trim input
    $username = isset($_POST['user']) ? trim(htmlspecialchars($_POST['user'])) : '';
    $password = isset($_POST['pass']) ? trim(htmlspecialchars($_POST['pass'])) : '';

    // Check credentials
    if ($username === "admin" && $password === "password123") {
        // Store user information in session
        $_SESSION['username'] = $username;

        echo "<br>Login successful. Redirecting..."; // Debug message
        header("Location: success.html");
        exit();
    } else {
        // Set an error message in the session
        $_SESSION['error'] = "Invalid username or password.";
        echo "<br>Login failed. Redirecting..."; // Debug message
        header("Location: fail.html"); // Redirect to fail.html
        exit();
    }
} else {
    echo "Debug: This page only accepts POST requests.";
}
?>
